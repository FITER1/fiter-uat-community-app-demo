<div class="content-container" ng-controller="CreditScoringController">
    <ul class="breadcrumb">
        <li><a href="#/clients">{{'label.anchor.clients' | translate}}</a></li>
        <li><a href='#/viewclient/{{clientId}}'>{{'label.anchor.viewclient' | translate}}</a></li>
        <li class="active">{{'label.creditscoring' | translate}}</li>
    </ul>
    
    <wizard current-step="step" on-finish="submit()" class="card well">
        <wz-step icon="fa fa-circle-o" wz-title="{{'label.heading.creditscoringburrower' | translate}}">
            <form name="Burrower" novalidate="" ng-submit="goNext(Terms)" class="form-inline">
                <fieldset>
                    <api-validate></api-validate>
                    <!-- <h3>{{'label.heading.details' | translate}}</h3> -->
                    <hr>
                    <table class="" style="border-spacing: 10px; border-collapse: separate">
                        <tr>
                            <td class="width14">
                                <label>{{ 'label.input.age' | translate }}:&nbsp;</label>
                                <span class="required">*</span>:</label>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="age" name="age" ng-model="formData.burrower.age" class="form-control" number-format required/>
                                <form-validate valattributeform="Burrower" valattribute="age" />
                            </td>
                            <td class="width14">
                                <label>{{ 'label.input.employment' | translate }}:&nbsp;</label>
                                <span class="required">*</span>:</label>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="employment" name="employment" ng-model="formData.burrower.employment" class="form-control" required/>
                                <form-validate valattributeform="Burrower" valattribute="employment" />
                            </td>
                        </tr>
                        <tr>
                            <td class="width14">
                                <label>{{ 'label.input.dtiratio' | translate }}</label>
                                <span class="required">*</span>:</label>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="dtiRatio" name="dtiRatio" ng-model="formData.burrower.dtiRatio" class="form-control" number-format required/>
                                <form-validate valattributeform="Burrower" valattribute="dtiRatio" />
                            </td>
                            <td class="width14">
                                <label>{{ 'label.input.paymentincidents' | translate }}</label>
                                <span class="required">*</span>:</label>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="paymentIncidents" name="paymentIncidents" ng-model="formData.burrower.paymentIncidents" class="form-control" required/>
                                <form-validate valattributeform="Burrower" valattribute="paymentIncidents" />
                            </td>
                        </tr>
                        <tr>
                            <td class="width14">
                                <label>{{ 'label.input.monthlyincome' | translate }}</label>
                                <span class="required">*</span>:</label>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="monthlyIncome" name="monthlyIncome" ng-model="formData.burrower.monthlyIncome" class="form-control" number-format required/>
                                <form-validate valattributeform="Burrower" valattribute="monthlyIncome" />
                            </td>
                            <td class="width14">
                                <label>{{ 'label.input.liquidatedassets' | translate }}</label>
                                <span class="required">*</span>:</label>
                            </td>
                            <td class="paddedbottom20 width36">
                                <input type="text" id="liquidatedAssets" name="liquidatedAssets" ng-model="formData.burrower.liquidatedAssets" class="form-control" required/>
                                <form-validate valattributeform="Burrower" valattribute="liquidatedAssets" />
                            </td>
                        </tr>
                    </table>
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous disabled ng-hide="disabled"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit" ng-hide="disabled">Next&nbsp;&nbsp;<i class="fa fa-arrow-right"></i>
                    </button>
                    <div class="col-sm-offset-6">
                    <button class="btn btn-warning" ng-hide="!disabled" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
                    </div>
                </fieldset>
            </form>
        </wz-step>
        <wz-step wz-title="{{ 'label.heading.creditscoringloan' | translate }}" wz-disabled="{{disabled}}">
            <form name="Loan" ng-submit="goNext(Loan)" class="form-inline">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3>{{ 'label.heading.terms' | translate }}</h3>-->
                    <hr>
                    <table class="width100">
                        <tr>
                            <td class="width19">
                                <label>{{ 'label.input.amount' | translate }}&nbsp;
                                    <span class="required">*</span>:</label>
                            </td>
                            <td class="width31 paddedbottom20">
                                <input type="text" class="form-control" id="amount" name="amount" ng-model="formData.loan.amount" number-format required
                                    late-Validate/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                <form-validate valattributeform="Loan" valattribute="amount" />
                            </td>
                            <td class="width14">
                                <label>{{ 'label.input.interest' | translate }}&nbsp;
                                    <span class="required">*</span>:</label>
                            </td>
                            <td class="width31 paddedbottom20">
                                <input type="text" class="form-control" id="interest" name="interest" ng-model="formData.loan.interest" number-format required
                                    late-Validate/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                <form-validate valattributeform="Loan" valattribute="interest" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>{{ 'label.input.opening' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20">
                                <input id="opening" class="form-control" name="opening" type="text" ng-model="formData.loan.opening"
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Loan" valattribute="opening" />
                            </td>
                            <td>
                                <label>{{ 'label.input.term' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20">
                                <input id="term" class="form-control" name="term" type="text" ng-model="formData.loan.term"
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Loan" valattribute="term" />
                            </td>

                        </tr>
                        <tr>
                            <td>
                                <label>{{ 'label.input.loandestiny' | translate }}</label>
                                <span class="required">*</span>
                            </td>
                            <td class="paddedbottom20">
                                <input id="loanDestiny" class="form-control" name="loanDestiny" type="text" ng-model="formData.loan.loanDestiny"
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Loan" valattribute="loanDestiny" />
                            </td>
                            <td>
                                <label class="control-label">{{ 'label.input.annualapr' | translate }}:</label>
                                <span class="required">*</span>
                            </td>
                            <td class="paddedbottom20">
                                <input id="annualApr" type="text" ng-model="formData.loan.annualApr" class="form-control" required/>
                            </td>
                        </tr>
                    </table>

                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>
        <wz-step wz-title="{{ 'label.heading.creditscoringcollateral' | translate }}" wz-disabled="{{disabled}}">
            <form name="Collateral" ng-submit="goNext(Collateral)" class="form-inline">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3>{{ 'label.heading.terms' | translate }}</h3>-->
                    <hr>
                    <table ng-show="loanaccountinfo" ng-hide="previewRepayment" class=" width100">
                        <tr>
                            <td class="width19">
                                <label>{{ 'label.input.propertytype' | translate }}&nbsp;
                                    <span class="required">*</span>:</label>
                            </td>
                            <td class="width31 paddedbottom20">
                                <input type="text" class="form-control" id="propertyType" name="propertyType" ng-model="formData.collateral.propertyType" required
                                    late-Validate/>
                                <form-validate valattributeform="Collateral" valattribute="propertyType" />
                            </td>
                            <td class="width14">
                                <label>{{ 'label.input.ltv' | translate }}&nbsp;
                                    <span class="required">*</span>:</label>
                            </td>
                            <td class="width31 paddedbottom20">
                                <input type="text" class="form-control" id="ltv" name="ltv" ng-model="formData.collateral.ltv" number-format required
                                    late-Validate/>
                                <form-validate valattributeform="Collateral" valattribute="ltv" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>{{ 'label.input.lltv' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20">
                                <input id="lltv" class="form-control" name="lltv" type="text" ng-model="formData.collateral.lltv" number-format
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Collateral" valattribute="lltv" />
                            </td>
                            <td>
                                <label>{{ 'label.input.previouscharges' | translate }}&nbsp;
                                    <span class="required">*</span>
                                </label>
                            </td>
                            <td class="paddedbottom20">
                                <input id="previousCharges" class="form-control" name="previousCharges" type="text" ng-model="formData.collateral.previousCharges" number-format
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Collateral" valattribute="previousCharges" />
                            </td>

                        </tr>
                        <tr>
                            <td>
                                <label>{{ 'label.input.population' | translate }}</label>
                                <span class="required">*</span>
                            </td>
                            <td class="paddedbottom20">
                                <input id="population" class="form-control" name="population" type="text" ng-model="formData.collateral.population" number-format
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Collateral" valattribute="population" />
                            </td>
                            <td>
                                <label class="control-label">{{ 'label.input.pricepermetersquare' | translate }}:</label>
                                <span class="required">*</span>
                            </td>
                            <td class="paddedbottom20">
                                <input id="pricePerMeterSquare" type="text" ng-model="formData.collateral.pricePerMeterSquare" class="form-control" number-format required/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>{{ 'label.input.liquidityratio' | translate }}</label>
                                <span class="required">*</span>
                            </td>
                            <td class="paddedbottom20">
                                <input id="liquidityRatio" class="form-control" name="liquidityRatio" type="text" ng-model="formData.collateral.liquidityRatio" number-format
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Collateral" valattribute="liquidityRatio" />
                            </td>
                            <td>
                                <label class="control-label">{{ 'label.input.buildingvalueratio' | translate }}:</label>
                                <span class="required">*</span>
                            </td>
                            <td class="paddedbottom20">
                                <input id="buildingValueRatio" type="text" ng-model="formData.collateral.buildingValueRatio" class="form-control" number-format required/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>{{ 'label.input.far' | translate }}</label>
                                <span class="required">*</span>
                            </td>
                            <td class="paddedbottom20">
                                <input id="far" class="form-control" name="far" type="text" ng-model="formData.collateral.far" number-format
                                    required late-Validate>&nbsp;
                                <form-validate valattributeform="Collateral" valattribute="far" />
                            </td>
                        </tr>
                    </table>

                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>
        <wz-step icon="fa fa-circle-o" ng-repeat="datatable in datatables" wz-title="{{datatable.registeredTableName}}" id="dynamicSteps"
            wz-disabled="{{disabled}}">
            <form name="Datatables" class="form-horizontal" ng-submit="submit()">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3><strong>{{datatable.registeredTableName}}</strong></h3>-->
                    <hr/>
                    <div class="form-group" ng-repeat="columnHeader in datatable.columnHeaderData">
                        <label class="control-label col-sm-3">{{ columnHeader.columnName | prettifyDataTableColumn }}
                            <span ng-show="!columnHeader.isColumnNullable" class="required">*</span>
                        </label>

                        <div class="col-sm-3">
                            <input ng-show="fieldType(columnHeader.columnDisplayType) == 'TEXT'" type="text" ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                class="form-control" />
                            <input ng-show="fieldType(columnHeader.columnDisplayType) == 'DATE'" type="text" datepicker-pop="dd MMMM yyyy" ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                is-open="opened{{$index}}" class="form-control" />
                            <div ng-show="fieldType(columnHeader.columnDisplayType) == 'DATETIME'" class="form-inline">
                                <div class="form-group">
                                    <input type="text" datepicker-pop="dd MMMM yyyy" ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].date"
                                        is-open="opened{{$index}}" class="form-control" />
                                </div>
                                <div class="form-group">
                                    <input type="time" placeholder="HH:MM:SS" ng-model="formDat.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].time"
                                        class="form-control" />
                                </div>
                            </div>
                            <div ng-show="fieldType(columnHeader.columnDisplayType) == 'BOOLEAN'">
                                <label class="radio-inline">
                                    <input type="radio" ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]" value="true"
                                    /> {{'label.input.true' | translate}}
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]" value="false"
                                    /> {{'label.input.false' | translate}}
                                </label>
                            </div>
                            <span data-ng-switch on="columnHeader.columnDisplayType">
                                <select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'" data-ng-switch-when="CODELOOKUP" ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                    ng-options="columnValue.id as columnValue.value for columnValue in columnHeader.columnValues"
                                    value="{{columnValue.id}}" class="form-control">
                                    <option value="">{{'label.selectone' | translate}}</option>
                                </select>
                                <select ng-show="fieldType(columnHeader.columnDisplayType) == 'SELECT'" data-ng-switch-when="CODEVALUE" ng-model="formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]"
                                    ng-options="columnValue.value as columnValue.value for columnValue in columnHeader.columnValues"
                                    value="{{columnValue.id}}" class="form-control">
                                    <option value="">{{'label.selectone' | translate}}</option>
                                </select>
                            </span>
                        </div>
                    </div>
                    <!--<div class="col-md-offset-5" ng-if="$last">-->
                    <!--<button id="cancel3" type="reset" class="btn btn-default" ng-click="cancel()">-->
                    <!--{{'label.button.cancel' | translate}}-->
                    <!--</button>-->
                    <!--<button id="save3" type="submit" has-permission='CREATE_LOAN' class="btn btn-primary"-->
                    <!--ng-show="loanaccountinfo">{{'label.button.save' |-->
                    <!--translate}}-->
                    <!--</button>-->
                    <!--</div>-->
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" type="submit">Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>
        <wz-step wz-title="Review" ng-if="!disabled">
            <form name="review" class="form-horizontal">
                <fieldset>
                    <api-validate></api-validate>
                    <!--<h3>Review</h3>-->
                    <table width="100%">
                        <tr class="bottomborder">
                            <td colspan="7">
                                <strong>{{'label.heading.creditscoringburrower' | translate}}</strong>
                            </td>
                        </tr>
                        <tr class="toppadding">
                            <td colspan="6">{{'label.input.age' | translate}}</td>
                            <td>{{formData.burrower.age}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.employment' | translate }}:&nbsp;
                            </td>
                            <td>{{formData.burrower.employment}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.dtiratio' | translate }}:&nbsp</td>
                            <td>{{formData.burrower.dtiRatio}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.paymentincidents' | translate }}</td>
                            <td class="">{{formData.burrower.paymentIncidents}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.monthlyincome' | translate }}</td>
                            <td class="">{{formData.burrower.monthlyIncome}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.liquidatedassets' | translate }}</td>
                            <td class="">{{formData.burrower.liquidatedAssets}}</td>
                        </tr>
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{'label.heading.creditscoringloan' | translate}}</strong>
                            </td>
                        </tr>
                        <tr class="toppadding">
                            <td colspan="6">{{ 'label.input.interest' | translate }}</td>
                            <td>{{formData.loan.interest}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.amount' | translate }}</td>
                            <td>{{formData.loan.amount}} {{loanaccountinfo.currency.DisplaySymbol}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.opening' | translate }}</td>
                            <td>{{formData.loan.opening}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.term' | translate }}</td>
                            <td>{{formData.loan.term}} {{loandetails.loanTermFrequencyValue}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.loandestiny' | translate }}</td>
                            <td>{{formData.loan.loanDestiny}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{ 'label.input.annualapr' | translate }}</td>
                            <td>{{formData.loan.annualApr}}</td>
                        </tr>
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{'label.heading.creditscoringcollateral' | translate }}</strong>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.propertytype' | translate}}</td>
                            <td>{{formData.collateral.propertyType}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.ltv' | translate}}</td>
                            <td>{{formData.collateral.ltv}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.lltv' | translate}}</td>
                            <td>{{formData.collateral.lltv}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.previouscharges' | translate}}</td>
                            <td>{{formData.collateral.previousCharges}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.population' | translate}}</td>
                            <td>{{formData.collateral.population}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.pricepermetersquare' | translate}}</td>
                            <td>{{formData.collateral.pricePerMeterSquare}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.liquidityratio' | translate}}</td>
                            <td>{{formData.collateral.liquidityRatio}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.buildingvalueratio' | translate}}</td>
                            <td>{{formData.collateral.buildingValueRatio}}</td>
                        </tr>
                        <tr>
                            <td colspan="6">{{'label.input.far' | translate}}</td>
                            <td>{{formData.collateral.far}}</td>
                        </tr>
                    </table>
                    <br>
                    <table width="100%" ng-repeat="datatable in datatables">
                        <tr class="bottomborder toppadding">
                            <td colspan="7">
                                <strong>{{datatable.registeredTableName}}</strong>
                            </td>
                        </tr>
                        <tr ng-repeat="columnHeader in datatable.columnHeaderData">
                            <td colspan="6">{{ columnHeader.columnName | prettifyDataTableColumn }}</td>
                            <td ng-hide="fieldType(columnHeader.columnDisplayType) == 'DATETIME' || fieldType(columnHeader.columnDisplayType) == 'DATE'">{{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName]}}</td>
                            <td ng-show="fieldType(columnHeader.columnDisplayType) == 'DATETIME'">{{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].date | DateFormat}}
                                {{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName].time }}</td>
                            <td ng-show="fieldType(columnHeader.columnDisplayType) == 'DATE'">{{formData.datatables[datatables.indexOf(datatable)].data[columnHeader.columnName] | DateFormat}}</td>
                        </tr>
                    </table>
                    <br>
                    <br>
                    <div class="col-md-offset-5">
                        <button id="cancel3" type="reset" class="btn btn-default" ng-click="cancel()">
                            {{'label.button.cancel' | translate}}
                        </button>
                        <button id="save" type="submit" class="btn btn-primary" wz-next>{{'label.button.processcreditscoring' | translate}}
                        </button>
                    </div>
                    <hr>
                    <div class="col-md-12 text-center">
                        <span>Qualification: </span>{{ scoring.qualification }}
                    </div>
                    <hr>
                    <button class="btn btn-default pull-left" wz-previous>
                        <i class="fa fa-arrow-left"></i>&nbsp;&nbsp;Previous
                    </button>
                    <button class="btn btn-default pull-right" disabled>Next&nbsp;&nbsp;
                        <i class="fa fa-arrow-right"></i>
                    </button>
                </fieldset>
            </form>
        </wz-step>
    </wizard>
</div>
